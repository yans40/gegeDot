<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Test CSS Links - VÃ©rification CSS</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        
        /* Test 1: stroke-opacity avec classe */
        .link1 { stroke-opacity: 0; stroke-width: 2; stroke: #333; }
        .link1.visible { stroke-opacity: 0.8; }
        
        /* Test 2: stroke-opacity avec style direct */
        .link2 { stroke-width: 2; stroke: #333; }
        
        /* Test 3: opacity avec classe */
        .link3 { opacity: 0; stroke-width: 2; stroke: #333; }
        .link3.visible { opacity: 1; }
        
        .node { cursor: pointer; }
        .node circle { fill: #4A90E2; stroke: #333; stroke-width: 2; }
        .node text { font-size: 12px; text-anchor: middle; }
        
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>Test CSS Links - VÃ©rification CSS</h1>
    
    <div class="test-section">
        <h3>Test 1: stroke-opacity avec classe CSS</h3>
        <p>Survolez le nÅ“ud pour voir si les liens apparaissent avec stroke-opacity</p>
        <svg id="test1" width="300" height="200"></svg>
    </div>
    
    <div class="test-section">
        <h3>Test 2: stroke-opacity avec style direct</h3>
        <p>Survolez le nÅ“ud pour voir si les liens apparaissent avec style direct</p>
        <svg id="test2" width="300" height="200"></svg>
    </div>
    
    <div class="test-section">
        <h3>Test 3: opacity avec classe CSS</h3>
        <p>Survolez le nÅ“ud pour voir si les liens apparaissent avec opacity</p>
        <svg id="test3" width="300" height="200"></svg>
    </div>

    <script>
        function createTest(svgId, linkClass, useDirectStyle = false) {
            const svg = d3.select(`#${svgId}`);
            const g = svg.append('g');
            
            const nodes = [
                { id: 1, name: 'A', x: 50, y: 100 },
                { id: 2, name: 'B', x: 150, y: 100 },
                { id: 3, name: 'C', x: 100, y: 150 }
            ];
            
            const links = [
                { source: 1, target: 2 },
                { source: 1, target: 3 },
                { source: 2, target: 3 }
            ];
            
            // CrÃ©er les liens
            const linkElements = g.selectAll(`.${linkClass}`)
                .data(links)
                .enter().append('line')
                .attr('class', linkClass)
                .attr('data-source', d => d.source)
                .attr('data-target', d => d.target)
                .attr('x1', d => nodes.find(n => n.id === d.source).x)
                .attr('y1', d => nodes.find(n => n.id === d.source).y)
                .attr('x2', d => nodes.find(n => n.id === d.target).x)
                .attr('y2', d => nodes.find(n => n.id === d.target).y);
            
            // CrÃ©er les nÅ“uds
            const nodeElements = g.selectAll('.node')
                .data(nodes)
                .enter().append('g')
                .attr('class', 'node')
                .attr('transform', d => `translate(${d.x},${d.y})`);
            
            nodeElements.append('circle').attr('r', 15);
            nodeElements.append('text').attr('dy', 5).text(d => d.name);
            
            // Ã‰vÃ©nements de survol
            nodeElements.on('mouseover', function(event, d) {
                console.log(`ðŸ”„ Test ${svgId} - Survol de: ${d.name}`);
                
                const connectedLinks = d3.selectAll(`.${linkClass}`)
                    .filter(function() {
                        const sourceId = d3.select(this).attr('data-source');
                        const targetId = d3.select(this).attr('data-target');
                        return sourceId == d.id || targetId == d.id;
                    });
                
                if (useDirectStyle) {
                    // Test avec style direct
                    connectedLinks.style('stroke-opacity', 0.8);
                } else {
                    // Test avec classe CSS
                    connectedLinks.classed('visible', true);
                }
            });
            
            nodeElements.on('mouseout', function() {
                console.log(`ðŸ‘‹ Test ${svgId} - Fin du survol`);
                
                if (useDirectStyle) {
                    d3.selectAll(`.${linkClass}`).style('stroke-opacity', 0);
                } else {
                    d3.selectAll(`.${linkClass}`).classed('visible', false);
                }
            });
        }
        
        // CrÃ©er les 3 tests
        createTest('test1', 'link1', false); // stroke-opacity avec classe
        createTest('test2', 'link2', true);  // stroke-opacity avec style direct
        createTest('test3', 'link3', false); // opacity avec classe
        
        console.log('âœ… Tests CSS initialisÃ©s');
    </script>
</body>
</html>






